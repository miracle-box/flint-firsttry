---
import Layout from '~/layouts/news-content.astro';
import { locales } from '~/utils/i18n';
import { fetchNews } from '~/utils/news';
import type { NewsPageProps as Props } from '~/types';

const { contentProps } = Astro.props;

export async function getStaticPaths() {
	const paths = [];
	const allPages = await fetchNews();

	for (const locale of locales) {
		const pages = allPages.map((p) => ({
			params: { locale, slug: p.slug },
			props: { contentProps: p },
		}));

		paths.push(...pages);
	}

	return paths;
}
---

<Layout>
	<contentProps.Content />
</Layout>
